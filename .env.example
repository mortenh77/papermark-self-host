# ============================================================================
# Papermark Self-Hosted Environment Configuration
# ============================================================================
# Copy this file to .env and fill in your values
# REQUIRED variables are marked with (REQUIRED)
# Optional variables have sensible defaults or can be omitted
# ============================================================================

# ============================================================================
# Core Application Settings
# ============================================================================

# (REQUIRED) Public URL where your Papermark instance will be accessible
# Example: https://papermark.yourdomain.com
PAPERMARK_PUBLIC_URL=https://papermark.yourdomain.com

# (REQUIRED) Domain for Traefik routing (without https://)
# Example: papermark.yourdomain.com
PAPERMARK_DOMAIN=papermark.yourdomain.com

# Docker image to use
PAPERMARK_IMAGE=ghcr.io/avnox-com/papermark:latest

# Number of Papermark replicas (for high availability)
PAPERMARK_REPLICAS=2

# ============================================================================
# Security
# ============================================================================

# (REQUIRED) Secret key for NextAuth.js session encryption
# Generate with: openssl rand -hex 32
# Or visit: https://generate-secret.vercel.app/32
NEXTAUTH_SECRET=

# ============================================================================
# Database Configuration
# ============================================================================

# (REQUIRED) PostgreSQL credentials
POSTGRES_DB=papermark
POSTGRES_USER=papermark
POSTGRES_PASSWORD=

# ============================================================================
# Storage Configuration
# ============================================================================
# You MUST configure ONE of the following storage options:

# ----------------------------------------------------------------------------
# Option 1: AWS S3
# ----------------------------------------------------------------------------
BLOB_STORAGE_TYPE=s3
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET_NAME=

# ----------------------------------------------------------------------------
# Option 2: MinIO or other S3-compatible storage (Self-Hosted)
# ----------------------------------------------------------------------------
# BLOB_STORAGE_TYPE=s3
# AWS_ACCESS_KEY_ID=papermark
# AWS_SECRET_ACCESS_KEY=papermark123
# S3_ENDPOINT=http://minio:9000  # Internal endpoint
# S3_FORCE_PATH_STYLE=true
# AWS_S3_BUCKET_NAME=papermark
# AWS_REGION=us-east-1

# MinIO Admin Credentials (if using MinIO)
# MINIO_ROOT_USER=minioadmin
# MINIO_ROOT_PASSWORD=
# MINIO_PAPERMARK_USER=papermark
# MINIO_PAPERMARK_PASSWORD=papermark123
# MINIO_API_DOMAIN=minio-api.yourdomain.com
# MINIO_CONSOLE_DOMAIN=minio.yourdomain.com
# MINIO_API_URL=https://minio-api.yourdomain.com

# ----------------------------------------------------------------------------
# Option 3: Vercel Blob Storage (if using Vercel infrastructure)
# ----------------------------------------------------------------------------
# BLOB_READ_WRITE_TOKEN=

# ============================================================================
# Authentication Providers (Optional but recommended)
# ============================================================================

# ----------------------------------------------------------------------------
# Google OAuth
# ----------------------------------------------------------------------------
# Get credentials from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# ----------------------------------------------------------------------------
# GitHub OAuth
# ----------------------------------------------------------------------------
# Get credentials from: https://github.com/settings/developers
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# ============================================================================
# Email Configuration (Resend)
# ============================================================================

# (REQUIRED for email functionality) Resend API Key
# Get your API key from: https://resend.com/api-keys
RESEND_API_KEY=

# From email address (must be verified with Resend)
EMAIL_FROM=noreply@yourdomain.com

# ============================================================================
# Redis Configuration (Optional but recommended for caching)
# ============================================================================

# Leave empty to use the included Redis container
# Or use external Redis/Upstash
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ============================================================================
# Analytics (Tinybird - Optional)
# ============================================================================

# Tinybird provides real-time analytics for document views
# Get your token from: https://www.tinybird.co/
TINYBIRD_TOKEN=
TINYBIRD_API_URL=https://api.tinybird.co

# Enable/disable analytics in the UI
ENABLE_ANALYTICS=true

# ============================================================================
# Payments (Stripe - Optional)
# ============================================================================

# Stripe configuration for paid features
# Get your keys from: https://dashboard.stripe.com/apikeys
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=

# ============================================================================
# Custom Domains (Optional - Advanced)
# ============================================================================

# Enable custom domain support (requires Vercel API integration)
ENABLE_CUSTOM_DOMAINS=false

# Vercel API credentials (only needed if using custom domains)
PROJECT_ID_VERCEL=
TEAM_ID_VERCEL=
AUTH_BEARER_TOKEN=

# ============================================================================
# Storage Paths Configuration
# ============================================================================

# Base path for all Docker data storage
# All paths below can be customized individually if needed
DATA_BASE_PATH=/mnt/shared/docker-data/papermark

# PostgreSQL data directory
POSTGRES_DATA_PATH=/mnt/shared/docker-data/papermark/postgres

# Redis data directory  
REDIS_DATA_PATH=/mnt/shared/docker-data/papermark/redis

# Application uploads directory
UPLOADS_PATH=/mnt/shared/docker-data/papermark/uploads

# PostgreSQL backups directory
BACKUP_PATH=/mnt/shared/docker-data/papermark/backups

# MinIO data directory (if using MinIO for S3-compatible storage)
MINIO_DATA_PATH=/mnt/shared/docker-data/papermark/papermark

# ============================================================================
# Backup Configuration
# ============================================================================

# Backup schedule (cron format)
# Default: @daily (once per day at midnight)
# Other options: @hourly, @weekly, @monthly, or custom cron like "0 2 * * *"
BACKUP_SCHEDULE=@daily

# Backup retention
BACKUP_KEEP_DAYS=7
BACKUP_KEEP_WEEKS=4
BACKUP_KEEP_MONTHS=6

# ============================================================================
# Advanced Configuration (Usually don't need to change)
# ============================================================================

# Node environment
NODE_ENV=production

# Application port (internal)
PORT=3000
